import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { within, userEvent } from '@storybook/testing-library'
import { axe, toHaveNoViolations } from 'jest-axe'
import { expect } from '@storybook/jest'
import ObjectUtilities from '../../utils/ObjectUtilities'
import VvButton from '../../components/VvButton/VvButton.vue'
import { VvButtonProps } from '../../components/VvButton/VvButton'

<Meta
	title="Components/Button"
	component={VvButton}
	args={{
		...ObjectUtilities.propsToObject(VvButtonProps),
		target: undefined,
		to: undefined,
		href: undefined,
		label: 'Test'
	}}
	argTypes={{
		onClick: { action: 'clicked' },
		modifiers: {
			control: {
				type: 'select',
				options: [
					null,
					'primary',
					'secondary',
					'danger',
					'ghost',
					'text',
					'static-light',
					'static-dark'
				]
			}
		},
		label: {
			control: { type: 'text' }
		},
		loading: {
			control: { type: 'boolean' }
		},
		disabled: {
			control: { type: 'boolean' }
		}
	}}
/>

export const Template = (args) => ({
	components: { VvButton },
	setup() {
		function onClick() {
			console.log('onClick')
		}
		return { args, onClick }
	},
	template:
		/*html*/
		`<vv-button v-bind="args" @click="onClick" />`
})

# VvButton

Stories of `VvButton`.
Let's define a story for our playground `button`:

<Story
	name="vv-button"
	args={{}}
	play={async ({ args, canvasElement }) => {
		const canvas = within(canvasElement)
		await userEvent.click(canvas.getByRole('button'))
		await expect.extend(toHaveNoViolations)
	}}>
	{Template.bind({})}
</Story>

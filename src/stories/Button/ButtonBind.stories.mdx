import { Canvas, Meta, Story } from '@storybook/addon-docs'
import VvButton from '../../components/Button/VvButton.vue'
import { within, userEvent } from '@storybook/testing-library'
import { axe, toHaveNoViolations } from 'jest-axe'
import { expect } from '@storybook/jest'

<Meta
	title="Components/Button"
	component={VvButton}
	argTypes={{
		onClick: { action: 'clicked' },
		size: {
			options: ['small', 'default', 'large'],
			control: { type: 'radio' }
		},
		variant: {
			options: [
				'primary',
				'secondary',
				'link',
				'outline',
				'danger',
				'success',
				'warning',
				'info'
			],
			control: { type: 'radio' }
		},
		label: { control: { type: 'text' } }
	}}
/>

export const Template = (args) => ({
	components: { VvButton },
	setup() {
		return { args }
	},
	template:
		/*html*/
		`<vv-button v-bind="args" />`
})

# VvButton binded

Stories of `VvButton`.
Let's define a story for our binded `button`:

<Story
	name="binded"
	args={{
		label: 'Button'
	}}
	play={async ({ args, canvasElement }) => {
		const canvas = within(canvasElement)
		await userEvent.click(canvas.getByRole('button'))
		await expect.extend(toHaveNoViolations)
	}}>
	{Template.bind({})}
</Story>

import { Canvas, Meta, Story, Source, ArgsTable } from '@storybook/addon-docs'
import { action } from '@storybook/addon-actions'

import { toGroup } from '../utils'
import ObjectUtilities from '../../utils/ObjectUtilities'
import VvTextarea from '../../components/VvTextarea/VvTextarea.vue'
import { VvTextareaProps } from '../../components/VvTextarea/VvTextarea'
import { textareaTest } from './Textarea.test.ts'

<Meta title="Components/Textarea" component={VvTextarea} />

export const Template = (args, { argTypes }) => ({
	props: Object.keys(argTypes),
	components: { VvTextarea },
	setup() {
		return { args }
	},
	data: () => ({ value: args.modelValue || '' }),
	template: `
		<div class="flex flex-col justify-between">
			<vv-textarea v-bind="args" v-model:modelValue="value" data-testid="textarea"/>
			<span>Valore: <strong id="value" data-testid="value">{{value}} </strong> </span>
		</div>
        `
})

# VvTextarea

`VvTextarea` is a multi-line text input element.

<Canvas>
	<Story
		name="vv-textarea"
		play={textareaTest}
		args={{
			...ObjectUtilities.propsToObject(VvTextareaProps),
			maxlength: null
		}}
		argTypes={{
			...toGroup(
				['required', 'minlength', 'maxlength'],
				'Data validation'
			),
			...toGroup(
				[
					'disabled',
					'readonly',
					'valid',
					'validLabel',
					'error',
					'errorLabel',
					'loading',
					'loadingLabel'
				],
				'State'
			),
			...toGroup(['floating'], 'Floating'),
			...toGroup(['modifiers'], 'Modifiers'),
			...toGroup(['icon', 'iconPosition'], 'Icon'),
			...toGroup(['hintLabel'], 'Hint text'),
			...toGroup(['limit'], 'Text limit count'),
			...toGroup(['autoclear'], 'Experimental feature')
		}}>
		{Template.bind({})}
	</Story>
</Canvas>

<ArgsTable story="vv-textarea" />

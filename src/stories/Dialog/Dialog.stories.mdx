import { Canvas, Meta, Story } from '@storybook/addon-docs'
import VvDialog from '@/components/VvDialog/VvDialog.vue'
import { defaultTest } from './Dialog.test'
import { defaultArgs, argTypes } from './Dialog.settings'

<Meta
	title="Components/Dialog"
	component={VvDialog}
	args={defaultArgs}
	argTypes={argTypes}
/>

export const Template = (args) => ({
	components: { VvDialog },
	setup() {
		return { args }
	},
	data: () => ({ open: false }),
	methods: {
		onClick() {
			this.open = !this.open
		}
	},
	template: `
		<vv-dialog v-bind="args" v-model="open" data-testId="element">
			<template #header v-if="args.header"><div v-html="args.header"></div></template>
			<template #default v-if="args.default"><div v-html="args.default"></div></template>
			<template #footer v-if="args.footer"><div v-html="args.footer"></div></template>
		</vv-dialog>
		<button class="vv-button" @click="onClick" data-testId="button">Toggle</button>
        `
})

<Canvas>
	<Story name="Dialog" play={defaultTest}>
		{Template.bind()}
	</Story>
</Canvas>

<Canvas>
	<Story
		name="Auto close"
		play={defaultTest}
		args={{ autoClose: true }}
		argTypes={{
			autoClose: {
				control: {
					disable: true
				}
			}
		}}>
		{Template.bind()}
	</Story>
</Canvas>
